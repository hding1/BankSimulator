package GUI.Monitor;

public class LoginButtonMonitor {

}package GUI.monitor;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

import javax.swing.JOptionPane;


import util.PropertiesUtil;


import GUI.window.LoginWindow;
import GUI.window.Selectwindow;

public class LoginButtonMonitor implements ActionListener {
	private LoginWindow loginWindow;

	/**
	 * Login窗口的监听器构造
	 * 
	 * @param loginWindow
	 */
	public LoginButtonMonitor(LoginWindow loginWindow) {
		this.loginWindow = loginWindow;
	}

	@Override
	public void actionPerformed(ActionEvent e) {


		// TODO Auto-generated method stub
		if(validate()==3){
			this.loginWindow.setVisible(false);
			Selectwindow selectwindow=new Selectwindow();
			selectwindow.launchSelectwindow();
		}
		else{
			this.loginWindow.setVisible(false);
			LoginWindow lw1 = new LoginWindow();
			lw1.launchLoginWindow();
		}
	}
	public int	validate(){
		String userid = this.loginWindow.getUserid().getText();
		String userpassword= new String(this.loginWindow.getPassword().getPassword());
		String uesrname=PropertiesUtil.getProperty("name");
		String password=PropertiesUtil.getProperty("password");	
	
			      if(!userid.equals(uesrname)){	 
						JOptionPane.showMessageDialog(this.loginWindow, 
				    			  "用户名不正确！", "提示信息",
									JOptionPane.ERROR_MESSAGE);
			    	  return 1;
			      }
			      if(!userpassword.equals(password)){
			    	  JOptionPane.showMessageDialog(this.loginWindow, 
			    			  "密码不正确！", "提示信息",
								JOptionPane.ERROR_MESSAGE);
			    	  return 1;
			      }    		    
				return 3;
		
		}


}

